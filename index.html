<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CMS Policy Chatbot: AI-powered assistant for policies, protocols, and parent handbooks.">
  <title>CMS Assistant</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
  <!-- PWA support -->
  <meta name="theme-color" content="#0b3a7a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <!-- SEO and Open Graph -->
  <meta property="og:title" content="CMS Assistant">
  <meta property="og:description" content="Official policy and handbook assistant for Central Montessori School.">
  <meta property="og:image" content="/cms-assistant-512.png">
  <meta property="og:url" content="https://your-domain.com">
</head>
<body>
  <!-- Login Screen -->
  <div id="login-screen" class="login-screen">
    <div class="header">
      <div class="header-inner">
        <div class="brand">
          <img src="/cms-logo.png" alt="CMS Logo" width="40">
          <h2>CMS Assistant</h2>
        </div>
      </div>
    </div>
    <form id="login-form" class="login-form">
      <h3>Login</h3>
      <div class="login-row">
        <label for="campus-select">Campus:</label>
        <select id="campus-select">
          <option value="">Select Campus</option>
          <!-- Options populated by JS -->
        </select>
      </div>
      <div class="login-row">
        <label for="access-code">Access Code:</label>
        <input type="password" id="access-code" placeholder="Enter code" required>
      </div>
      <div class="login-row">
        <label>Role:</label>
        <input type="radio" id="role-staff" name="role" value="staff" checked> Staff
        <input type="radio" id="role-parent" name="role" value="parent"> Parent
      </div>
      <button type="submit" class="btn">Login</button>
      <p id="login-error" class="login-error muted"></p>
      <button type="button" id="login-admin-btn" class="btn">Admin Mode</button>
    </form>
  </div>

  <!-- Main Chat Screen (hidden initially) -->
  <div id="chat-screen" class="chat-screen hidden">
    <div class="header">
      <div class="header-inner">
        <div class="brand">
          <img src="/cms-logo.png" alt="CMS Logo" width="32">
          <h2>CMS Assistant</h2>
        </div>
        <div id="header-actions">
          <span id="mode-badge" class="mode-badge"></span>
          <select id="campus-switch">
            <!-- Options populated by JS -->
          </select>
          <button id="logout-btn" class="btn">Logout</button>
          <button id="admin-mode-btn" class="btn">Enable Admin</button>
        </div>
        <div id="admin-links" class="admin-links hidden">
          <a href="/dashboard.html" class="btn">Dashboard</a>
          <a href="/logs.html" class="btn">Logs</a>
        </div>
      </div>
    </div>

    <!-- Top Menu Bar -->
    <div id="top-menu-bar" class="top-menu-bar">
      <!-- Menu pills: Policies, Protocols, Handbooks, Chat -->
      <div class="menu-pill" id="menu-policies">Policies</div>
      <div class="menu-pill" id="menu-protocols">Protocols</div>
      <div class="menu-pill" id="menu-handbooks">Handbooks</div>
      <div class="menu-pill" id="menu-chat">Chat</div>
    </div>

    <!-- Chat Window -->
    <div id="chat-window" class="chat-window"></div>
    <div class="chat-input-row">
      <input id="chat-input" type="text" placeholder="Ask about policies or handbooks...">
      <button id="chat-send-btn" class="btn">Send</button>
    </div>

    <!-- Handbook Section (modern UI) -->
    <div id="handbook-section" class="handbook-section hidden">
      <div class="hb-items">
        <!-- Dynamic handbook items -->
      </div>
      <button id="hb-open-sec" class="hb-open-sec">Open Section</button>
      <div id="hb-preview" class="hb-preview">
        <div class="hb-preview-title">Preview Title</div>
        <div class="hb-preview-text">Preview content...</div>
      </div>
      <button id="hb-copy-btn" class="hb-copy-btn">Copy</button>
    </div>
  </div>

  <!-- Admin Modal -->
  <div id="admin-modal" class="modal hidden">
    <div class="modal-card">
      <h3 class="modal-title">Enter Admin PIN</h3>
      <input id="admin-pin-input" type="password" placeholder="PIN">
      <div class="modal-actions">
        <button id="admin-pin-cancel" class="btn">Cancel</button>
        <button id="admin-pin-submit" class="btn">Submit</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="app.js"></script>
  <script src="admin.js"></script> <!-- If needed for shared functions -->

  <!-- Service Worker for PWA -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js');
    }
  </script>
</body>
</html>
