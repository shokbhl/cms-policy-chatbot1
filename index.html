<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CMS Assistant</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <img class="logo" src="./cms-logo.png" alt="CMS" onerror="this.style.display='none'"/>
        <div>
          <div class="title">CMS Assistant</div>
          <div class="subtitle">Policy • Protocol • Parent Handbook assistant</div>
        </div>
      </div>

      <div class="status">
        <span class="pill" id="rolePill">Role: —</span>
        <span class="pill" id="campusPill">Campus: —</span>
        <button class="btn ghost" id="logoutBtn">Logout</button>
      </div>
    </header>

    <nav class="tabs">
      <button class="tab active" data-tab="welcome">Welcome</button>
      <button class="tab" data-tab="handbook">Parent Handbook</button>
      <button class="tab" data-tab="ask">Ask Assistant</button>
      <button class="tab" data-tab="admin">Admin</button>

      <div class="rightTools">
        <select id="campusSelect" class="select">
          <option value="">Select campus…</option>
          <option value="WC">WC</option>
          <option value="MC">MC</option>
          <option value="TC">TC</option>
          <option value="YC">YC</option>
          <option value="SC">SC</option>
        </select>
      </div>
    </nav>

    <main class="content">
      <!-- WELCOME -->
      <section class="panel show" id="tab-welcome">
        <!-- ✅ همون Welcome قبلی: تغییرش ندادم (فقط داخل کارت خوشگل‌تر) -->
        <div class="card">
          <div class="cardHead">
            <h2>Welcome</h2>
            <div class="muted">Login as Parent, Staff, or Admin</div>
          </div>

          <div class="grid3">
            <div class="box">
              <h3>Parent</h3>
              <p class="muted">Parents can ask questions from the <b>Parent Handbook only.</b></p>
              <input id="parentCode" class="input" placeholder="Parent access code" />
              <button id="parentLoginBtn" class="btn primary">Login as Parent</button>
            </div>

            <div class="box">
              <h3>Staff</h3>
              <p class="muted">Staff can ask from <b>Policies + Protocols + Handbook</b>.</p>
              <input id="staffCode" class="input" placeholder="Staff access code" />
              <button id="staffLoginBtn" class="btn primary">Login as Staff</button>
            </div>

            <div class="box">
              <h3>Admin</h3>
              <p class="muted">Admin can view logs/stats and also test the assistant.</p>
              <input id="adminPin" class="input" placeholder="Admin PIN" />
              <button id="adminLoginBtn" class="btn primary">Login as Admin</button>
            </div>
          </div>

          <div class="hint">
            Campus is required for handbook matching. Choose campus from top menu before logging in.
          </div>
        </div>

        <div class="toast" id="toast" aria-live="polite"></div>
      </section>

      <!-- HANDBOOK -->
      <section class="panel" id="tab-handbook">
        <div class="card">
          <div class="cardHead">
            <h2>Parent Handbook</h2>
            <div class="muted">Browse handbook sections (requires login)</div>
          </div>

          <div class="row">
            <button id="loadHandbooksBtn" class="btn">Load Handbooks</button>
            <select id="handbookSelect" class="select grow">
              <option value="">Select handbook…</option>
            </select>
            <select id="sectionSelect" class="select grow">
              <option value="">Select section…</option>
            </select>
            <button id="loadSectionBtn" class="btn">Load Section</button>
          </div>

          <div class="divider"></div>

          <div id="handbookOutput" class="output"></div>
        </div>
      </section>

      <!-- ASK -->
      <section class="panel" id="tab-ask">
        <div class="card">
          <div class="cardHead">
            <h2>Ask Assistant</h2>
            <div class="muted">Ask anything related to your access level</div>
          </div>

          <div class="row">
            <input id="questionInput" class="input grow" placeholder='Ask a question (example: "What is the late pickup fee?")' />
            <button id="askBtn" class="btn primary">Ask</button>
          </div>

          <div class="divider"></div>

          <div id="answerBox" class="output"></div>
          <div class="muted small" id="accessHint"></div>
        </div>
      </section>

      <!-- ADMIN -->
      <section class="panel" id="tab-admin">
        <div class="card">
          <div class="cardHead">
            <h2>Admin Panel</h2>
            <div class="muted">Logs & health stats (admin login required)</div>
          </div>

          <div class="row">
            <button id="loadStatsBtn" class="btn">Load Stats</button>
            <button id="loadLogsBtn" class="btn primary">Load Logs</button>
          </div>

          <div class="grid2">
            <div class="box">
              <h3>Stats</h3>
              <pre id="statsBox" class="pre"></pre>
            </div>
            <div class="box">
              <h3>Logs</h3>
              <div id="logsBox" class="logs"></div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="./app.js"></script>
</body>
</html>